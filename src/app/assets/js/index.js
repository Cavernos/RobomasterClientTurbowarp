var F=Object.defineProperty,L=(e,t,r)=>t in e?F(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a=(e,t,r)=>L(e,typeof t!="symbol"?t+"":t,r);class d{constructor(t,r,o="",n="POST",s=void 0){a(this,"arguments"),a(this,"blockType"),a(this,"opcode"),a(this,"serve_method"),a(this,"text"),this.opcode=t,this.blockType=r,this.text=l.getMessage(this.opcode)==="NoTranslation"?o:l.getMessage(this.opcode),this.serve_method=n,this.arguments=s}async requestHandler(t,r="POST",o=void 0){try{const n=await(await fetch(`http://${_.robomaster_api.host}:${_.robomaster_api.port}/${t}`,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(o||{})})).json();return console.log(n),n}catch(n){console.error(`Erreur lors de la requ\xEAte ${t}:`,n)}}async run(){return await this.requestHandler(this.opcode,this.serve_method,this.arguments)}}const U="robomaster_turbowarp_extension",H="0.0.1",G={message:"RobomasterBasics",description:"name of tab"},V={message:"Start",description:"text on block"},J={message:"Stop",description:"text on block"},K={message:"Armor",description:"name of tab"},q={message:"Chassis",description:"name of tab"},X={message:"Move x: [x]m y: [y]m z: [z]m speed: [speed]m/s",description:"text on block"},Z={message:"Rotate angle: [angle]\xB0",description:"text on block"},Q={message:"ExtensionModule",description:"name of tab"},W={message:"Move arm to [position]",description:"text on block"},Y={message:"Grabber [action]",description:"text on block"},tt={message:["open","close"],description:"text in menu"},et={message:["up","down"],description:"text in menu"},nt={message:"LedEffects",description:"name of tab"},rt={message:"Media",description:"name of tab"},ot={message:"Sensor",description:"name of tab"},st={message:"SensorAdapter",description:"name of tab"},at={message:"Smart",description:"name of tab"},it={RobomasterBasics:G,start:V,stop:J,Armor:K,Chassis:q,move:X,rotate:Z,ExtensionModule:Q,arm:W,grabber:Y,grabberActions:tt,armPositions:et,LedEffects:nt,Media:rt,Sensor:ot,SensorAdapter:st,Smart:at},ct={message:"RobomasterBases",description:"name of tab"},lt={message:"Commencer",description:"text on block"},ut={message:"Arr\xEAter",description:"text on block"},pt={message:"Armure",description:"name of tab"},ft={message:"Chassis",description:"name of tab"},dt={message:"Bouger x: [x]m y: [y]m z: [z]m Vitesse: [speed]m/s",description:"text on block"},ht={message:"Rotation d'un angle: [angle]\xB0",description:"text on block"},mt={message:"ModuleExtension",description:"name of tab"},gt={message:"Bouger le bras vers [position]",description:"text on block"},bt={message:"Pince [action]",description:"text on block"},yt={message:["ouvrir","fermer"],description:"text in menu"},_t={message:["monter","descendre"],description:"text in menu"},St={message:"EffetsDeLeds",description:"name of tab"},vt={message:"Media",description:"name of tab"},Ot={message:"Capteurs",description:"name of tab"},Tt={message:"AdapteurCapteurs",description:"name of tab"},xt={message:"Intelligence",description:"name of tab"},At={RobomasterBasics:ct,start:lt,stop:ut,Armor:pt,Chassis:ft,move:dt,rotate:ht,ExtensionModule:mt,arm:gt,grabber:bt,grabberActions:yt,armPositions:_t,LedEffects:St,Media:vt,Sensor:Ot,SensorAdapter:Tt,Smart:xt};class Mt{constructor(t="en"){a(this,"lang"),a(this,"available_language"),a(this,"translations"),this.lang=t,this.available_language={en:it,fr:At},this.translations=this.available_language[this.lang]}getMessage(t){return this.translations.hasOwnProperty(t)?this.translations[t].message:"NoTranslation"}generate_template(){const t={};for(const[r,o]of Object.entries(_.tabs)){if(t[r]={message:this.getMessage(r),description:"name of tab"},o.blocks.length!==0)for(const n of o.blocks)t[n.opcode]={message:n.text,description:"text on block"};if("menus"in o)for(const[n,s]of Object.entries(o.menus))t[n]={message:s,description:"text in menu"}}return((r,o)=>{const n=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=`${o}.json`,i.click(),URL.revokeObjectURL(s)})(t,"messages.template")}}const l=new Mt,_={name:U,version:H,robomaster_api:{host:"localhost",port:8e3},tabs:{RobomasterBasics:{color:"#202530",blocks:[new d("start",Scratch.BlockType.COMMAND),new d("stop",Scratch.BlockType.COMMAND)]},Armor:{color:"#F5C343",blocks:[]},Chassis:{color:"#651FFF",blocks:[new d("move",Scratch.BlockType.COMMAND,"","POST",{x:{type:Scratch.ArgumentType.NUMBER,defaultValue:1},y:{type:Scratch.ArgumentType.NUMBER,defaultValue:0},z:{type:Scratch.ArgumentType.NUMBER,defaultValue:0},speed:{type:Scratch.ArgumentType.NUMBER,defaultValue:.5}}),new d("rotate",Scratch.BlockType.COMMAND,"","POST",{angle:{type:Scratch.ArgumentType.NUMBER,defaultValue:90}})]},ExtensionModule:{color:"#F24A88",blocks:[new d("arm",Scratch.BlockType.COMMAND,"","POST",{position:{type:Scratch.ArgumentType.STRING,menu:"armPositions",defaultValue:l.getMessage("armPositions")[0]}}),new d("grabber",Scratch.BlockType.COMMAND,"","POST",{action:{type:Scratch.ArgumentType.STRING,menu:"grabberActions",defaultValue:l.getMessage("grabberActions")[0]}})],menus:{grabberActions:l.getMessage("grabberActions"),armPositions:l.getMessage("armPositions")}},LedEffects:{color:"#58C0A6",blocks:[]},Media:{color:"#67AD5B",blocks:[]},Sensor:{color:"#6DD700",blocks:[]},SensorAdapter:{color:"#00c87e",blocks:[]},Smart:{color:"#F19D38",blocks:[]}}};var $t=typeof global=="object"&&global&&global.Object===Object&&global,Pt=typeof self=="object"&&self&&self.Object===Object&&self,x=$t||Pt||Function("return this")(),h=x.Symbol,R=Object.prototype,Ct=R.hasOwnProperty,wt=R.toString,g=h?h.toStringTag:void 0;function Et(e){var t=Ct.call(e,g),r=e[g];try{e[g]=void 0;var o=!0}catch{}var n=wt.call(e);return o&&(t?e[g]=r:delete e[g]),n}var jt=Object.prototype,Nt=jt.toString;function kt(e){return Nt.call(e)}var Rt="[object Null]",zt="[object Undefined]",w=h?h.toStringTag:void 0;function z(e){return e==null?e===void 0?zt:Rt:w&&w in Object(e)?Et(e):kt(e)}function Bt(e){return e!=null&&typeof e=="object"}var It="[object Symbol]";function A(e){return typeof e=="symbol"||Bt(e)&&z(e)==It}function Dt(e,t){for(var r=-1,o=e==null?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}var M=Array.isArray,E=h?h.prototype:void 0,j=E?E.toString:void 0;function B(e){if(typeof e=="string")return e;if(M(e))return Dt(e,B)+"";if(A(e))return j?j.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function S(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Ft="[object AsyncFunction]",Lt="[object Function]",Ut="[object GeneratorFunction]",Ht="[object Proxy]";function Gt(e){if(!S(e))return!1;var t=z(e);return t==Lt||t==Ut||t==Ft||t==Ht}var T=x["__core-js_shared__"],N=function(){var e=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Vt(e){return!!N&&N in e}var Jt=Function.prototype,Kt=Jt.toString;function qt(e){if(e!=null){try{return Kt.call(e)}catch{}try{return e+""}catch{}}return""}var Xt=/[\\^$.*+?()[\]{}|]/g,Zt=/^\[object .+?Constructor\]$/,Qt=Function.prototype,Wt=Object.prototype,Yt=Qt.toString,te=Wt.hasOwnProperty,ee=RegExp("^"+Yt.call(te).replace(Xt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ne(e){if(!S(e)||Vt(e))return!1;var t=Gt(e)?ee:Zt;return t.test(qt(e))}function re(e,t){return e?.[t]}function $(e,t){var r=re(e,t);return ne(r)?r:void 0}var k=function(){try{var e=$(Object,"defineProperty");return e({},"",{}),e}catch{}}(),oe=9007199254740991,se=/^(?:0|[1-9]\d*)$/;function ae(e,t){var r=typeof e;return t=t??oe,!!t&&(r=="number"||r!="symbol"&&se.test(e))&&e>-1&&e%1==0&&e<t}function ie(e,t,r){t=="__proto__"&&k?k(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function I(e,t){return e===t||e!==e&&t!==t}var ce=Object.prototype,le=ce.hasOwnProperty;function ue(e,t,r){var o=e[t];(!(le.call(e,t)&&I(o,r))||r===void 0&&!(t in e))&&ie(e,t,r)}var pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fe=/^\w*$/;function de(e,t){if(M(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||A(e)?!0:fe.test(e)||!pe.test(e)||t!=null&&e in Object(t)}var b=$(Object,"create");function he(){this.__data__=b?b(null):{},this.size=0}function me(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var ge="__lodash_hash_undefined__",be=Object.prototype,ye=be.hasOwnProperty;function _e(e){var t=this.__data__;if(b){var r=t[e];return r===ge?void 0:r}return ye.call(t,e)?t[e]:void 0}var Se=Object.prototype,ve=Se.hasOwnProperty;function Oe(e){var t=this.__data__;return b?t[e]!==void 0:ve.call(t,e)}var Te="__lodash_hash_undefined__";function xe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=b&&t===void 0?Te:t,this}function u(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=he,u.prototype.delete=me,u.prototype.get=_e,u.prototype.has=Oe,u.prototype.set=xe;function Ae(){this.__data__=[],this.size=0}function v(e,t){for(var r=e.length;r--;)if(I(e[r][0],t))return r;return-1}var Me=Array.prototype,$e=Me.splice;function Pe(e){var t=this.__data__,r=v(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():$e.call(t,r,1),--this.size,!0}function Ce(e){var t=this.__data__,r=v(t,e);return r<0?void 0:t[r][1]}function we(e){return v(this.__data__,e)>-1}function Ee(e,t){var r=this.__data__,o=v(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}function m(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}m.prototype.clear=Ae,m.prototype.delete=Pe,m.prototype.get=Ce,m.prototype.has=we,m.prototype.set=Ee;var je=$(x,"Map");function Ne(){this.size=0,this.__data__={hash:new u,map:new(je||m),string:new u}}function ke(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function O(e,t){var r=e.__data__;return ke(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Re(e){var t=O(this,e).delete(e);return this.size-=t?1:0,t}function ze(e){return O(this,e).get(e)}function Be(e){return O(this,e).has(e)}function Ie(e,t){var r=O(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}function p(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}p.prototype.clear=Ne,p.prototype.delete=Re,p.prototype.get=ze,p.prototype.has=Be,p.prototype.set=Ie;var De="Expected a function";function P(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(De);var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],s=r.cache;if(s.has(n))return s.get(n);var i=e.apply(this,o);return r.cache=s.set(n,i)||s,i};return r.cache=new(P.Cache||p),r}P.Cache=p;var Fe=500;function Le(e){var t=P(e,function(o){return r.size===Fe&&r.clear(),o}),r=t.cache;return t}var Ue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,He=/\\(\\)?/g,Ge=Le(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ue,function(r,o,n,s){t.push(n?s.replace(He,"$1"):o||r)}),t});function Ve(e){return e==null?"":B(e)}function Je(e,t){return M(e)?e:de(e,t)?[e]:Ge(Ve(e))}function Ke(e){if(typeof e=="string"||A(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function qe(e,t,r,o){if(!S(e))return e;t=Je(t,e);for(var n=-1,s=t.length,i=s-1,f=e;f!=null&&++n<s;){var c=Ke(t[n]),y=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(n!=i){var C=f[c];y=void 0,y===void 0&&(y=S(C)?C:ae(t[n+1])?[]:{})}ue(f,c,y),f=f[c]}return e}function Xe(e,t,r){return e==null?e:qe(e,t,r)}class Ze{constructor(t="NoName",r="#000000",o=[],n={}){a(this,"runtime"),a(this,"id"),a(this,"name"),a(this,"color"),a(this,"blocks"),a(this,"menus"),this.id=`${t.substring(0,1).toLowerCase()}${t.substring(1)}`,this.name=t.match(/[A-Z][a-z]+/g).join(" "),this.color=r,this.blocks=o,this.menus=n;for(const s of this.blocks)Xe(this,s.opcode.toString(),async()=>await s.run())}getInfo(){return{id:this.id,name:this.name,color1:this.color,color2:this.color,blocks:this.blocks,menus:this.menus}}}const D=[];for(const[e,t]of Object.entries(_.tabs))"menus"in t&&D.push(new Ze(l.getMessage(e),t.color,t.blocks,t.menus));D.forEach(e=>Scratch.extensions.register(e));
