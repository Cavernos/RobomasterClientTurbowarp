var L=Object.defineProperty,U=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a=(e,t,r)=>U(e,typeof t!="symbol"?t+"":t,r);class d{constructor(t,r,o="",n="POST",s=void 0){a(this,"opcode"),a(this,"blockType"),a(this,"text"),a(this,"serve_method"),a(this,"arguments"),this.opcode=t,this.blockType=r,this.text=l.getMessage(this.opcode)==="NoTranslation"?o:l.getMessage(this.opcode),this.serve_method=n,this.arguments=s}async requestHandler(t,r="POST",o=void 0){try{const n=await(await fetch(`http://${_.robomaster_api.host}:${_.robomaster_api.port}/${t}`,{method:r,headers:{"Content-Type":"application/json"},body:JSON.stringify(o||{})})).json();return console.log(n),n}catch(n){console.error(`Erreur lors de la requ\xEAte ${t}:`,n)}}async run(){return await this.requestHandler(this.opcode,this.serve_method,this.arguments)}}const H="robomaster_turbowarp_extension",G="0.0.1",V={message:"RobomasterBasics",description:"name of tab"},J={message:"Start",description:"text on block"},K={message:"Stop",description:"text on block"},q={message:"Armor",description:"name of tab"},X={message:"Chassis",description:"name of tab"},Z={message:"Move x: [x]m y: [y]m z: [z]m speed: [speed]m/s",description:"text on block"},Q={message:"Rotate angle: [angle]\xB0",description:"text on block"},W={message:"ExtensionModule",description:"name of tab"},Y={message:"Move arm to [position]",description:"text on block"},tt={message:"Grabber [action]",description:"text on block"},et={message:["open","close"],description:"text in menu"},nt={message:["up","down"],description:"text in menu"},rt={message:"LedEffects",description:"name of tab"},ot={message:"Media",description:"name of tab"},st={message:"Sensor",description:"name of tab"},at={message:"SensorAdapter",description:"name of tab"},it={message:"Smart",description:"name of tab"},ct={RobomasterBasics:V,start:J,stop:K,Armor:q,Chassis:X,move:Z,rotate:Q,ExtensionModule:W,arm:Y,grabber:tt,grabberActions:et,armPositions:nt,LedEffects:rt,Media:ot,Sensor:st,SensorAdapter:at,Smart:it},lt={message:"RobomasterBases",description:"name of tab"},ut={message:"Commencer",description:"text on block"},pt={message:"Arr\xEAter",description:"text on block"},ft={message:"Armure",description:"name of tab"},dt={message:"Chassis",description:"name of tab"},ht={message:"Bouger x: [x]m y: [y]m z: [z]m Vitesse: [speed]m/s",description:"text on block"},gt={message:"Rotation d'un angle: [angle]\xB0",description:"text on block"},mt={message:"ModuleExtension",description:"name of tab"},bt={message:"Bouger le bras vers [position]",description:"text on block"},yt={message:"Pince [action]",description:"text on block"},_t={message:["ouvrir","fermer"],description:"text in menu"},St={message:["monter","descendre"],description:"text in menu"},vt={message:"EffetsDeLeds",description:"name of tab"},Ot={message:"Media",description:"name of tab"},Tt={message:"Capteurs",description:"name of tab"},xt={message:"AdapteurCapteurs",description:"name of tab"},Mt={message:"Intelligence",description:"name of tab"},At={RobomasterBasics:lt,start:ut,stop:pt,Armor:ft,Chassis:dt,move:ht,rotate:gt,ExtensionModule:mt,arm:bt,grabber:yt,grabberActions:_t,armPositions:St,LedEffects:vt,Media:Ot,Sensor:Tt,SensorAdapter:xt,Smart:Mt};class $t{constructor(t="en"){a(this,"lang"),a(this,"available_language"),a(this,"translations"),this.lang=t,this.available_language={en:ct,fr:At},this.translations=this.available_language[this.lang]}getMessage(t){return t in this.translations?this.translations[t].message:"NoTranslation"}generate_template(){const t={};for(const[r,o]of Object.entries(_.tabs)){if(t[r]={message:this.getMessage(r),description:"name of tab"},o.blocks.length!==0)for(const n of o.blocks)t[n.opcode]={message:n.text,description:"text on block"};if("menus"in o)for(const[n,s]of Object.entries(o.menus))t[n]={message:s,description:"text in menu"}}return((r,o)=>{const n=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=`${o}.json`,i.click(),URL.revokeObjectURL(s)})(t,"messages.template")}}const l=new $t,_={name:H,version:G,robomaster_api:{host:"localhost",port:8e3},tabs:{RobomasterBasics:{color:"#202530",blocks:[new d("start",Scratch.BlockType.COMMAND),new d("stop",Scratch.BlockType.COMMAND)]},Armor:{color:"#F5C343",blocks:[]},Chassis:{color:"#651FFF",blocks:[new d("move",Scratch.BlockType.COMMAND,"","POST",{x:{type:Scratch.ArgumentType.NUMBER,defaultValue:1},y:{type:Scratch.ArgumentType.NUMBER,defaultValue:0},z:{type:Scratch.ArgumentType.NUMBER,defaultValue:0},speed:{type:Scratch.ArgumentType.NUMBER,defaultValue:.5}}),new d("rotate",Scratch.BlockType.COMMAND,"","POST",{angle:{type:Scratch.ArgumentType.NUMBER,defaultValue:90}})]},ExtensionModule:{color:"#F24A88",blocks:[new d("arm",Scratch.BlockType.COMMAND,"","POST",{position:{type:Scratch.ArgumentType.STRING,menu:"armPositions",defaultValue:l.getMessage("armPositions")[0]}}),new d("grabber",Scratch.BlockType.COMMAND,"","POST",{action:{type:Scratch.ArgumentType.STRING,menu:"grabberActions",defaultValue:l.getMessage("grabberActions")[0]}})],menus:{grabberActions:l.getMessage("grabberActions"),armPositions:l.getMessage("armPositions")}},LedEffects:{color:"#58C0A6",blocks:[]},Media:{color:"#67AD5B",blocks:[]},Sensor:{color:"#6DD700",blocks:[]},SensorAdapter:{color:"#00c87e",blocks:[]},Smart:{color:"#F19D38",blocks:[]}}};var Pt=typeof global=="object"&&global&&global.Object===Object&&global,Ct=typeof self=="object"&&self&&self.Object===Object&&self,x=Pt||Ct||Function("return this")(),h=x.Symbol,z=Object.prototype,wt=z.hasOwnProperty,Et=z.toString,m=h?h.toStringTag:void 0;function jt(e){var t=wt.call(e,m),r=e[m];try{e[m]=void 0;var o=!0}catch{}var n=Et.call(e);return o&&(t?e[m]=r:delete e[m]),n}var Nt=Object.prototype,kt=Nt.toString;function Rt(e){return kt.call(e)}var zt="[object Null]",Bt="[object Undefined]",w=h?h.toStringTag:void 0;function B(e){return e==null?e===void 0?Bt:zt:w&&w in Object(e)?jt(e):Rt(e)}function It(e){return e!=null&&typeof e=="object"}var Dt="[object Symbol]";function M(e){return typeof e=="symbol"||It(e)&&B(e)==Dt}function Ft(e,t){for(var r=-1,o=e==null?0:e.length,n=Array(o);++r<o;)n[r]=t(e[r],r,e);return n}var A=Array.isArray,E=h?h.prototype:void 0,j=E?E.toString:void 0;function I(e){if(typeof e=="string")return e;if(A(e))return Ft(e,I)+"";if(M(e))return j?j.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function S(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Lt="[object AsyncFunction]",Ut="[object Function]",Ht="[object GeneratorFunction]",Gt="[object Proxy]";function Vt(e){if(!S(e))return!1;var t=B(e);return t==Ut||t==Ht||t==Lt||t==Gt}var T=x["__core-js_shared__"],N=function(){var e=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Jt(e){return!!N&&N in e}var Kt=Function.prototype,qt=Kt.toString;function Xt(e){if(e!=null){try{return qt.call(e)}catch{}try{return e+""}catch{}}return""}var Zt=/[\\^$.*+?()[\]{}|]/g,Qt=/^\[object .+?Constructor\]$/,Wt=Function.prototype,Yt=Object.prototype,te=Wt.toString,ee=Yt.hasOwnProperty,ne=RegExp("^"+te.call(ee).replace(Zt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function re(e){if(!S(e)||Jt(e))return!1;var t=Vt(e)?ne:Qt;return t.test(Xt(e))}function oe(e,t){return e?.[t]}function $(e,t){var r=oe(e,t);return re(r)?r:void 0}var k=function(){try{var e=$(Object,"defineProperty");return e({},"",{}),e}catch{}}(),se=9007199254740991,ae=/^(?:0|[1-9]\d*)$/;function ie(e,t){var r=typeof e;return t=t??se,!!t&&(r=="number"||r!="symbol"&&ae.test(e))&&e>-1&&e%1==0&&e<t}function ce(e,t,r){t=="__proto__"&&k?k(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function D(e,t){return e===t||e!==e&&t!==t}var le=Object.prototype,ue=le.hasOwnProperty;function pe(e,t,r){var o=e[t];(!(ue.call(e,t)&&D(o,r))||r===void 0&&!(t in e))&&ce(e,t,r)}var fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,de=/^\w*$/;function he(e,t){if(A(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||M(e)?!0:de.test(e)||!fe.test(e)||t!=null&&e in Object(t)}var b=$(Object,"create");function ge(){this.__data__=b?b(null):{},this.size=0}function me(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var be="__lodash_hash_undefined__",ye=Object.prototype,_e=ye.hasOwnProperty;function Se(e){var t=this.__data__;if(b){var r=t[e];return r===be?void 0:r}return _e.call(t,e)?t[e]:void 0}var ve=Object.prototype,Oe=ve.hasOwnProperty;function Te(e){var t=this.__data__;return b?t[e]!==void 0:Oe.call(t,e)}var xe="__lodash_hash_undefined__";function Me(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=b&&t===void 0?xe:t,this}function u(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}u.prototype.clear=ge,u.prototype.delete=me,u.prototype.get=Se,u.prototype.has=Te,u.prototype.set=Me;function Ae(){this.__data__=[],this.size=0}function v(e,t){for(var r=e.length;r--;)if(D(e[r][0],t))return r;return-1}var $e=Array.prototype,Pe=$e.splice;function Ce(e){var t=this.__data__,r=v(t,e);if(r<0)return!1;var o=t.length-1;return r==o?t.pop():Pe.call(t,r,1),--this.size,!0}function we(e){var t=this.__data__,r=v(t,e);return r<0?void 0:t[r][1]}function Ee(e){return v(this.__data__,e)>-1}function je(e,t){var r=this.__data__,o=v(r,e);return o<0?(++this.size,r.push([e,t])):r[o][1]=t,this}function g(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}g.prototype.clear=Ae,g.prototype.delete=Ce,g.prototype.get=we,g.prototype.has=Ee,g.prototype.set=je;var Ne=$(x,"Map");function ke(){this.size=0,this.__data__={hash:new u,map:new(Ne||g),string:new u}}function Re(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function O(e,t){var r=e.__data__;return Re(t)?r[typeof t=="string"?"string":"hash"]:r.map}function ze(e){var t=O(this,e).delete(e);return this.size-=t?1:0,t}function Be(e){return O(this,e).get(e)}function Ie(e){return O(this,e).has(e)}function De(e,t){var r=O(this,e),o=r.size;return r.set(e,t),this.size+=r.size==o?0:1,this}function p(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var o=e[t];this.set(o[0],o[1])}}p.prototype.clear=ke,p.prototype.delete=ze,p.prototype.get=Be,p.prototype.has=Ie,p.prototype.set=De;var Fe="Expected a function";function P(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Fe);var r=function(){var o=arguments,n=t?t.apply(this,o):o[0],s=r.cache;if(s.has(n))return s.get(n);var i=e.apply(this,o);return r.cache=s.set(n,i)||s,i};return r.cache=new(P.Cache||p),r}P.Cache=p;var Le=500;function Ue(e){var t=P(e,function(o){return r.size===Le&&r.clear(),o}),r=t.cache;return t}var He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/\\(\\)?/g,Ve=Ue(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(He,function(r,o,n,s){t.push(n?s.replace(Ge,"$1"):o||r)}),t});function Je(e){return e==null?"":I(e)}function Ke(e,t){return A(e)?e:he(e,t)?[e]:Ve(Je(e))}function qe(e){if(typeof e=="string"||M(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Xe(e,t,r,o){if(!S(e))return e;t=Ke(t,e);for(var n=-1,s=t.length,i=s-1,f=e;f!=null&&++n<s;){var c=qe(t[n]),y=r;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(n!=i){var C=f[c];y=void 0,y===void 0&&(y=S(C)?C:ie(t[n+1])?[]:{})}pe(f,c,y),f=f[c]}return e}function Ze(e,t,r){return e==null?e:Xe(e,t,r)}class R{constructor(t="NoName",r="#000000",o=[],n={}){a(this,"id"),a(this,"name"),a(this,"color"),a(this,"blocks"),a(this,"menus"),this.id=`${t.substring(0,1).toLowerCase()}${t.substring(1)}`,this.name=t.match(/[A-Z][a-z]+/g).join(" "),this.color=r,this.blocks=o,this.menus=n;for(const s of this.blocks)Ze(this,s.opcode.toString(),async()=>await s.run())}getInfo(){return{id:this.id,name:this.name,color1:this.color,color2:this.color,blocks:this.blocks,menus:this.menus}}}const F=[];for(const[e,t]of Object.entries(_.tabs)){let r;"menus"in t?r=new R(l.getMessage(e),t.color,t.blocks,t.menus):r=new R(l.getMessage(e),t.color,t.blocks),F.push(r)}F.forEach(e=>Scratch.extensions.register(e));
