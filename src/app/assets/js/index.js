var L=Object.defineProperty,U=(e,t,o)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,a=(e,t,o)=>U(e,typeof t!="symbol"?t+"":t,o);class p{constructor(t,o,r="",n="POST",s=void 0){a(this,"opcode"),a(this,"blockType"),a(this,"text"),a(this,"serve_method"),a(this,"arguments"),this.opcode=t,this.blockType=o,this.text=l.getMessage(this.opcode)==="NoTranslation"?r:l.getMessage(this.opcode),this.serve_method=n,this.arguments=s}async requestHandler(t,o="POST",r=void 0){try{const n=await(await fetch(`http://${_.robomaster_api.host}:${_.robomaster_api.port}/${t}`,{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(r||{})})).json();return console.log(n),n}catch(n){console.error(`Erreur lors de la requ\xEAte ${t}:`,n)}}async run(t){return await this.requestHandler(this.opcode,this.serve_method,t)}}const G="robomaster_turbowarp_extension",H="0.0.1",V={message:"RobomasterBasics",description:"name of tab"},J={message:"Start",description:"text on block"},K={message:"Stop",description:"text on block"},q={message:"Armor",description:"name of tab"},X={message:"Chassis",description:"name of tab"},Z={message:"Move x: [x]m y: [y]m z: [z]m speed: [speed]m/s",description:"text on block"},Q={message:"Rotate angle: [angle]\xB0",description:"text on block"},W={message:"ExtensionModule",description:"name of tab"},Y={message:"Move arm to [position]",description:"text on block"},tt={message:"Grabber [action]",description:"text on block"},et={message:["open","close"],description:"text in menu"},nt={message:["up","down"],description:"text in menu"},rt={message:"LedEffects",description:"name of tab"},ot={message:"Media",description:"name of tab"},st={message:"Say [say]",description:"text on block"},at={message:"Sensor",description:"name of tab"},it={message:"SensorAdapter",description:"name of tab"},ct={message:"Smart",description:"name of tab"},lt={RobomasterBasics:V,start:J,stop:K,Armor:q,Chassis:X,move:Z,rotate:Q,ExtensionModule:W,arm:Y,grabber:tt,grabberActions:et,armPositions:nt,LedEffects:rt,Media:ot,say:st,Sensor:at,SensorAdapter:it,Smart:ct},pt={message:"RobomasterBases",description:"name of tab"},ut={message:"Commencer",description:"text on block"},ft={message:"Arr\xEAter",description:"text on block"},dt={message:"Armure",description:"name of tab"},ht={message:"Chassis",description:"name of tab"},mt={message:"Bouger x: [x]m y: [y]m z: [z]m Vitesse: [speed]m/s",description:"text on block"},gt={message:"Rotation d'un angle: [angle]\xB0",description:"text on block"},bt={message:"ModuleExtension",description:"name of tab"},yt={message:"Bouger le bras vers [position]",description:"text on block"},_t={message:"Pince [action]",description:"text on block"},St={message:["ouvrir","fermer"],description:"text in menu"},Tt={message:["monter","descendre"],description:"text in menu"},vt={message:"EffetsDeLeds",description:"name of tab"},Ot={message:"Media",description:"name of tab"},xt={message:"Dire [say]",description:"text on block"},At={message:"Capteurs",description:"name of tab"},Mt={message:"AdapteurCapteurs",description:"name of tab"},$t={message:"Intelligence",description:"name of tab"},Pt={RobomasterBasics:pt,start:ut,stop:ft,Armor:dt,Chassis:ht,move:mt,rotate:gt,ExtensionModule:bt,arm:yt,grabber:_t,grabberActions:St,armPositions:Tt,LedEffects:vt,Media:Ot,say:xt,Sensor:At,SensorAdapter:Mt,Smart:$t};class Ct{constructor(t="en"){a(this,"lang"),a(this,"available_language"),a(this,"translations"),this.lang=t,this.available_language={en:lt,fr:Pt},this.translations=this.available_language[this.lang]}getMessage(t){return t in this.translations?this.translations[t].message:"NoTranslation"}generate_template(){const t={};for(const[o,r]of Object.entries(_.tabs)){if(t[o]={message:this.getMessage(o),description:"name of tab"},r.blocks.length!==0)for(const n of r.blocks)t[n.opcode]={message:n.text,description:"text on block"};if("menus"in r)for(const[n,s]of Object.entries(r.menus))t[n]={message:s,description:"text in menu"}}return((o,r)=>{const n=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),s=URL.createObjectURL(n),i=document.createElement("a");i.href=s,i.download=`${r}.json`,i.click(),URL.revokeObjectURL(s)})(t,"messages.template")}}const l=new Ct,_={name:G,version:H,robomaster_api:{host:"localhost",port:8e3},tabs:{RobomasterBasics:{color:"#202530",blocks:[new p("start",Scratch.BlockType.COMMAND,"","POST",{type:Scratch.ArgumentType.STRING,menu:"robotIp",defaultValue:"192.168.0.2"}),new p("stop",Scratch.BlockType.COMMAND)],menus:{robotIp:["192.168.0.2"]}},Armor:{color:"#F5C343",blocks:[]},Chassis:{color:"#651FFF",blocks:[new p("move",Scratch.BlockType.COMMAND,"","POST",{x:{type:Scratch.ArgumentType.NUMBER,defaultValue:1},y:{type:Scratch.ArgumentType.NUMBER,defaultValue:0},z:{type:Scratch.ArgumentType.NUMBER,defaultValue:0},speed:{type:Scratch.ArgumentType.NUMBER,defaultValue:.5}}),new p("rotate",Scratch.BlockType.COMMAND,"","POST",{angle:{type:Scratch.ArgumentType.NUMBER,defaultValue:90}})]},ExtensionModule:{color:"#F24A88",blocks:[new p("arm",Scratch.BlockType.COMMAND,"","POST",{position:{type:Scratch.ArgumentType.STRING,menu:"armPositions",defaultValue:l.getMessage("armPositions")[0]}}),new p("grabber",Scratch.BlockType.COMMAND,"","POST",{action:{type:Scratch.ArgumentType.STRING,menu:"grabberActions",defaultValue:l.getMessage("grabberActions")[0]}})],menus:{grabberActions:l.getMessage("grabberActions"),armPositions:l.getMessage("armPositions")}},LedEffects:{color:"#58C0A6",blocks:[]},Media:{color:"#67AD5B",blocks:[new p("say",Scratch.BlockType.COMMAND,"","POST",{say:{type:Scratch.ArgumentType.STRING,defaultValue:"Hello"}})]},Sensor:{color:"#6DD700",blocks:[]},SensorAdapter:{color:"#00c87e",blocks:[]},Smart:{color:"#F19D38",blocks:[]}}};var wt=typeof global=="object"&&global&&global.Object===Object&&global,Et=typeof self=="object"&&self&&self.Object===Object&&self,x=wt||Et||Function("return this")(),h=x.Symbol,I=Object.prototype,jt=I.hasOwnProperty,Nt=I.toString,g=h?h.toStringTag:void 0;function kt(e){var t=jt.call(e,g),o=e[g];try{e[g]=void 0;var r=!0}catch{}var n=Nt.call(e);return r&&(t?e[g]=o:delete e[g]),n}var Rt=Object.prototype,It=Rt.toString;function zt(e){return It.call(e)}var Bt="[object Null]",Dt="[object Undefined]",w=h?h.toStringTag:void 0;function z(e){return e==null?e===void 0?Dt:Bt:w&&w in Object(e)?kt(e):zt(e)}function Ft(e){return e!=null&&typeof e=="object"}var Lt="[object Symbol]";function A(e){return typeof e=="symbol"||Ft(e)&&z(e)==Lt}function Ut(e,t){for(var o=-1,r=e==null?0:e.length,n=Array(r);++o<r;)n[o]=t(e[o],o,e);return n}var M=Array.isArray,E=h?h.prototype:void 0,j=E?E.toString:void 0;function B(e){if(typeof e=="string")return e;if(M(e))return Ut(e,B)+"";if(A(e))return j?j.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function S(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Gt="[object AsyncFunction]",Ht="[object Function]",Vt="[object GeneratorFunction]",Jt="[object Proxy]";function Kt(e){if(!S(e))return!1;var t=z(e);return t==Ht||t==Vt||t==Gt||t==Jt}var O=x["__core-js_shared__"],N=function(){var e=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qt(e){return!!N&&N in e}var Xt=Function.prototype,Zt=Xt.toString;function Qt(e){if(e!=null){try{return Zt.call(e)}catch{}try{return e+""}catch{}}return""}var Wt=/[\\^$.*+?()[\]{}|]/g,Yt=/^\[object .+?Constructor\]$/,te=Function.prototype,ee=Object.prototype,ne=te.toString,re=ee.hasOwnProperty,oe=RegExp("^"+ne.call(re).replace(Wt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function se(e){if(!S(e)||qt(e))return!1;var t=Kt(e)?oe:Yt;return t.test(Qt(e))}function ae(e,t){return e?.[t]}function $(e,t){var o=ae(e,t);return se(o)?o:void 0}var k=function(){try{var e=$(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ie=9007199254740991,ce=/^(?:0|[1-9]\d*)$/;function le(e,t){var o=typeof e;return t=t??ie,!!t&&(o=="number"||o!="symbol"&&ce.test(e))&&e>-1&&e%1==0&&e<t}function pe(e,t,o){t=="__proto__"&&k?k(e,t,{configurable:!0,enumerable:!0,value:o,writable:!0}):e[t]=o}function D(e,t){return e===t||e!==e&&t!==t}var ue=Object.prototype,fe=ue.hasOwnProperty;function de(e,t,o){var r=e[t];(!(fe.call(e,t)&&D(r,o))||o===void 0&&!(t in e))&&pe(e,t,o)}var he=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/;function ge(e,t){if(M(e))return!1;var o=typeof e;return o=="number"||o=="symbol"||o=="boolean"||e==null||A(e)?!0:me.test(e)||!he.test(e)||t!=null&&e in Object(t)}var b=$(Object,"create");function be(){this.__data__=b?b(null):{},this.size=0}function ye(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _e="__lodash_hash_undefined__",Se=Object.prototype,Te=Se.hasOwnProperty;function ve(e){var t=this.__data__;if(b){var o=t[e];return o===_e?void 0:o}return Te.call(t,e)?t[e]:void 0}var Oe=Object.prototype,xe=Oe.hasOwnProperty;function Ae(e){var t=this.__data__;return b?t[e]!==void 0:xe.call(t,e)}var Me="__lodash_hash_undefined__";function $e(e,t){var o=this.__data__;return this.size+=this.has(e)?0:1,o[e]=b&&t===void 0?Me:t,this}function u(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=be,u.prototype.delete=ye,u.prototype.get=ve,u.prototype.has=Ae,u.prototype.set=$e;function Pe(){this.__data__=[],this.size=0}function T(e,t){for(var o=e.length;o--;)if(D(e[o][0],t))return o;return-1}var Ce=Array.prototype,we=Ce.splice;function Ee(e){var t=this.__data__,o=T(t,e);if(o<0)return!1;var r=t.length-1;return o==r?t.pop():we.call(t,o,1),--this.size,!0}function je(e){var t=this.__data__,o=T(t,e);return o<0?void 0:t[o][1]}function Ne(e){return T(this.__data__,e)>-1}function ke(e,t){var o=this.__data__,r=T(o,e);return r<0?(++this.size,o.push([e,t])):o[r][1]=t,this}function m(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}m.prototype.clear=Pe,m.prototype.delete=Ee,m.prototype.get=je,m.prototype.has=Ne,m.prototype.set=ke;var Re=$(x,"Map");function Ie(){this.size=0,this.__data__={hash:new u,map:new(Re||m),string:new u}}function ze(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function v(e,t){var o=e.__data__;return ze(t)?o[typeof t=="string"?"string":"hash"]:o.map}function Be(e){var t=v(this,e).delete(e);return this.size-=t?1:0,t}function De(e){return v(this,e).get(e)}function Fe(e){return v(this,e).has(e)}function Le(e,t){var o=v(this,e),r=o.size;return o.set(e,t),this.size+=o.size==r?0:1,this}function f(e){var t=-1,o=e==null?0:e.length;for(this.clear();++t<o;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=Ie,f.prototype.delete=Be,f.prototype.get=De,f.prototype.has=Fe,f.prototype.set=Le;var Ue="Expected a function";function P(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Ue);var o=function(){var r=arguments,n=t?t.apply(this,r):r[0],s=o.cache;if(s.has(n))return s.get(n);var i=e.apply(this,r);return o.cache=s.set(n,i)||s,i};return o.cache=new(P.Cache||f),o}P.Cache=f;var Ge=500;function He(e){var t=P(e,function(r){return o.size===Ge&&o.clear(),r}),o=t.cache;return t}var Ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Je=/\\(\\)?/g,Ke=He(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ve,function(o,r,n,s){t.push(n?s.replace(Je,"$1"):r||o)}),t});function qe(e){return e==null?"":B(e)}function Xe(e,t){return M(e)?e:ge(e,t)?[e]:Ke(qe(e))}function Ze(e){if(typeof e=="string"||A(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Qe(e,t,o,r){if(!S(e))return e;t=Xe(t,e);for(var n=-1,s=t.length,i=s-1,d=e;d!=null&&++n<s;){var c=Ze(t[n]),y=o;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(n!=i){var C=d[c];y=void 0,y===void 0&&(y=S(C)?C:le(t[n+1])?[]:{})}de(d,c,y),d=d[c]}return e}function We(e,t,o){return e==null?e:Qe(e,t,o)}class R{constructor(t="NoName",o="#000000",r=[],n={}){a(this,"id"),a(this,"name"),a(this,"color"),a(this,"blocks"),a(this,"menus"),this.id=`${t.substring(0,1).toLowerCase()}${t.substring(1)}`,this.name=t.match(/[A-Z][a-z]+/g).join(" "),this.color=o,this.blocks=r,this.menus=n;for(const s of this.blocks)We(this,s.opcode.toString(),async i=>await s.run(i))}getInfo(){return{id:this.id,name:this.name,color1:this.color,color2:this.color,blocks:this.blocks,menus:this.menus}}}const F=[];for(const[e,t]of Object.entries(_.tabs)){let o;"menus"in t?o=new R(l.getMessage(e),t.color,t.blocks,t.menus):o=new R(l.getMessage(e),t.color,t.blocks),F.push(o)}F.forEach(e=>Scratch.extensions.register(e));
